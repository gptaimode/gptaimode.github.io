import{_ as A}from"./Product.09de24c3.js";import{u as E,l as k,a as S,t as x,_ as I,b as D}from"./Landing.f94a9ff2.js";import{u as N,_ as T}from"./useHeadSeo.15f47654.js";import{r as z,f as H,h as K,g as M,l as B,w as O,o as i,i as p,j as R,d as s,k as V,s as W,m as q}from"./entry.4056f4ce.js";import{b as F}from"./usePageTransition.978c5cb1.js";import{u as C}from"./usePreviewToken.e2eab71a.js";import{u as G}from"./useErrorPage.d0f4f3c6.js";import"./Footer.afd5bacf.js";import"./Blocks.8c5b8746.js";import"./BlockTimedTabs.vue.f2d6cf94.js";import"./Listing.6a839da7.js";import"./slugify.068b7bc9.js";import"./useResourceIndexData.e9e093f3.js";/* empty css                   */import"./List.5a8bf2e9.js";import"./usePageLoading.853e73a1.js";import"./lang.4a9029fb.js";async function J(){const l=z(""),{browserLanguage:o}=E();return await(async()=>{const a=await k().getItem(S);if(a){l.value=a;return}l.value=o,await k().setItem(S,o)})(),{userLanguage:l}}const da={__name:"[...slug]",async setup(l){var L,v;let o,m;const a=H(),{$api:_}=K(),u="/"+(a.params.slug||[]).join("/"),f=Object.keys(x).includes(u);M(async()=>{var r;const{userLanguage:n}=await J();if(f&&!n.value.startsWith("en")){const t=B.find(d=>d.code===n.value);t!=null&&t.redirect&&((r=x[u])!=null&&r.includes(n.value))&&(window.location.href=`/${n.value}${u}`)}});const w=a.params.parent,g=B.some(n=>n.code===w),y=a.params.slug[a.params.slug.length-2]||null,h=g?w:"en";let b=[_.landingBySlug({slug:a.params.slug.slice(-1),parent:a.params.slug.length>1?y:g?null:a.params.parent,preview:C().value,locale:h}),_.productLandingBySlug({slug:a.params.slug.slice(-1),product:g?y:a.params.parent,preview:C().value,locale:h})];const{data:e,error:c,pending:Q}=([o,m]=O(()=>F(`product-landing-or-landing-${u}-${a.params.parent}`,async()=>Promise.all(b).then(([n,r])=>{const t=n||r;return(!t||t.nestedSlug&&!a.fullPath.includes(t.nestedSlug))&&W({statusCode:404,message:"Page not found"}),t}))),o=await o,m(),o);return G({data:e,error:c}),N({title:(L=e==null?void 0:e.value)==null?void 0:L.title,seo:(v=e==null?void 0:e.value)==null?void 0:v.seo}),(n,r)=>{const t=A,d=I,U=D,j=T;return i(),p(j,{id:`${s(e).type}-${s(e).slug}`,class:V({"translated-page":s(f)})},{default:R(()=>{var P,$;return[!s(c)&&((P=s(e))==null?void 0:P.template)==="product"?(i(),p(t,{key:0,data:s(e)},null,8,["data"])):!s(c)&&(($=s(e))==null?void 0:$.template)==="detail"?(i(),p(d,{key:1,data:s(e)},null,8,["data"])):s(c)?q("",!0):(i(),p(U,{key:2,data:s(e)},null,8,["data"]))]}),_:1},8,["id","class"])}}};export{da as default};
